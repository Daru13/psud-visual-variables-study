import * as Papa from "papaparse";
import { ParticipantID } from './Session';
import { Trial, ObjectCount } from './Trial';


const TRIAL_TABLE_CSV = 
`DesignName,ParticipantID,TrialID,Block1,Block2,OC,VV
Design 1,1,1,1,1,Medium,Saturation
Design 1,1,2,1,2,Medium,Hue_Saturation
Design 1,1,3,1,2,Medium,Hue_Saturation
Design 1,1,4,1,3,Medium,Hue
Design 1,1,5,1,4,Medium,Hue_Saturation
Design 1,1,6,1,5,Medium,Saturation
Design 1,1,7,1,6,Medium,Hue
Design 1,1,8,1,7,Medium,Hue_Saturation
Design 1,1,9,1,8,Medium,Hue
Design 1,1,10,1,9,Medium,Hue_Saturation
Design 1,1,11,1,10,Medium,Saturation
Design 1,1,12,1,10,Medium,Saturation
Design 1,1,13,1,11,Medium,Hue
Design 1,1,14,1,12,Medium,Saturation
Design 1,1,15,1,13,Medium,Hue
Design 1,1,16,2,1,Low,Saturation
Design 1,1,17,2,2,Low,Hue_Saturation
Design 1,1,18,2,2,Low,Hue_Saturation
Design 1,1,19,2,3,Low,Hue
Design 1,1,20,2,4,Low,Hue_Saturation
Design 1,1,21,2,5,Low,Saturation
Design 1,1,22,2,6,Low,Hue
Design 1,1,23,2,7,Low,Hue_Saturation
Design 1,1,24,2,8,Low,Hue
Design 1,1,25,2,9,Low,Hue_Saturation
Design 1,1,26,2,10,Low,Saturation
Design 1,1,27,2,10,Low,Saturation
Design 1,1,28,2,11,Low,Hue
Design 1,1,29,2,12,Low,Saturation
Design 1,1,30,2,13,Low,Hue
Design 1,1,31,3,1,High,Saturation
Design 1,1,32,3,2,High,Hue_Saturation
Design 1,1,33,3,2,High,Hue_Saturation
Design 1,1,34,3,3,High,Hue
Design 1,1,35,3,4,High,Hue_Saturation
Design 1,1,36,3,5,High,Saturation
Design 1,1,37,3,6,High,Hue
Design 1,1,38,3,7,High,Hue_Saturation
Design 1,1,39,3,8,High,Hue
Design 1,1,40,3,9,High,Hue_Saturation
Design 1,1,41,3,10,High,Saturation
Design 1,1,42,3,10,High,Saturation
Design 1,1,43,3,11,High,Hue
Design 1,1,44,3,12,High,Saturation
Design 1,1,45,3,13,High,Hue
Design 1,2,46,1,1,High,Saturation
Design 1,2,47,1,2,High,Hue_Saturation
Design 1,2,48,1,2,High,Hue_Saturation
Design 1,2,49,1,3,High,Hue
Design 1,2,50,1,4,High,Hue_Saturation
Design 1,2,51,1,5,High,Saturation
Design 1,2,52,1,6,High,Hue
Design 1,2,53,1,7,High,Hue_Saturation
Design 1,2,54,1,8,High,Hue
Design 1,2,55,1,9,High,Hue_Saturation
Design 1,2,56,1,10,High,Saturation
Design 1,2,57,1,10,High,Saturation
Design 1,2,58,1,11,High,Hue
Design 1,2,59,1,12,High,Saturation
Design 1,2,60,1,13,High,Hue
Design 1,2,61,2,1,Medium,Saturation
Design 1,2,62,2,2,Medium,Hue_Saturation
Design 1,2,63,2,2,Medium,Hue_Saturation
Design 1,2,64,2,3,Medium,Hue
Design 1,2,65,2,4,Medium,Hue_Saturation
Design 1,2,66,2,5,Medium,Saturation
Design 1,2,67,2,6,Medium,Hue
Design 1,2,68,2,7,Medium,Hue_Saturation
Design 1,2,69,2,8,Medium,Hue
Design 1,2,70,2,9,Medium,Hue_Saturation
Design 1,2,71,2,10,Medium,Saturation
Design 1,2,72,2,10,Medium,Saturation
Design 1,2,73,2,11,Medium,Hue
Design 1,2,74,2,12,Medium,Saturation
Design 1,2,75,2,13,Medium,Hue
Design 1,2,76,3,1,Low,Saturation
Design 1,2,77,3,2,Low,Hue_Saturation
Design 1,2,78,3,2,Low,Hue_Saturation
Design 1,2,79,3,3,Low,Hue
Design 1,2,80,3,4,Low,Hue_Saturation
Design 1,2,81,3,5,Low,Saturation
Design 1,2,82,3,6,Low,Hue
Design 1,2,83,3,7,Low,Hue_Saturation
Design 1,2,84,3,8,Low,Hue
Design 1,2,85,3,9,Low,Hue_Saturation
Design 1,2,86,3,10,Low,Saturation
Design 1,2,87,3,10,Low,Saturation
Design 1,2,88,3,11,Low,Hue
Design 1,2,89,3,12,Low,Saturation
Design 1,2,90,3,13,Low,Hue
Design 1,3,91,1,1,Low,Saturation
Design 1,3,92,1,2,Low,Hue_Saturation
Design 1,3,93,1,2,Low,Hue_Saturation
Design 1,3,94,1,3,Low,Hue
Design 1,3,95,1,4,Low,Hue_Saturation
Design 1,3,96,1,5,Low,Saturation
Design 1,3,97,1,6,Low,Hue
Design 1,3,98,1,7,Low,Hue_Saturation
Design 1,3,99,1,8,Low,Hue
Design 1,3,100,1,9,Low,Hue_Saturation
Design 1,3,101,1,10,Low,Saturation
Design 1,3,102,1,10,Low,Saturation
Design 1,3,103,1,11,Low,Hue
Design 1,3,104,1,12,Low,Saturation
Design 1,3,105,1,13,Low,Hue
Design 1,3,106,2,1,High,Saturation
Design 1,3,107,2,2,High,Hue_Saturation
Design 1,3,108,2,2,High,Hue_Saturation
Design 1,3,109,2,3,High,Hue
Design 1,3,110,2,4,High,Hue_Saturation
Design 1,3,111,2,5,High,Saturation
Design 1,3,112,2,6,High,Hue
Design 1,3,113,2,7,High,Hue_Saturation
Design 1,3,114,2,8,High,Hue
Design 1,3,115,2,9,High,Hue_Saturation
Design 1,3,116,2,10,High,Saturation
Design 1,3,117,2,10,High,Saturation
Design 1,3,118,2,11,High,Hue
Design 1,3,119,2,12,High,Saturation
Design 1,3,120,2,13,High,Hue
Design 1,3,121,3,1,Medium,Saturation
Design 1,3,122,3,2,Medium,Hue_Saturation
Design 1,3,123,3,2,Medium,Hue_Saturation
Design 1,3,124,3,3,Medium,Hue
Design 1,3,125,3,4,Medium,Hue_Saturation
Design 1,3,126,3,5,Medium,Saturation
Design 1,3,127,3,6,Medium,Hue
Design 1,3,128,3,7,Medium,Hue_Saturation
Design 1,3,129,3,8,Medium,Hue
Design 1,3,130,3,9,Medium,Hue_Saturation
Design 1,3,131,3,10,Medium,Saturation
Design 1,3,132,3,10,Medium,Saturation
Design 1,3,133,3,11,Medium,Hue
Design 1,3,134,3,12,Medium,Saturation
Design 1,3,135,3,13,Medium,Hue
Design 1,4,136,1,1,Medium,Saturation
Design 1,4,137,1,2,Medium,Hue_Saturation
Design 1,4,138,1,2,Medium,Hue_Saturation
Design 1,4,139,1,3,Medium,Hue
Design 1,4,140,1,4,Medium,Hue_Saturation
Design 1,4,141,1,5,Medium,Saturation
Design 1,4,142,1,6,Medium,Hue
Design 1,4,143,1,7,Medium,Hue_Saturation
Design 1,4,144,1,8,Medium,Hue
Design 1,4,145,1,9,Medium,Hue_Saturation
Design 1,4,146,1,10,Medium,Saturation
Design 1,4,147,1,10,Medium,Saturation
Design 1,4,148,1,11,Medium,Hue
Design 1,4,149,1,12,Medium,Saturation
Design 1,4,150,1,13,Medium,Hue
Design 1,4,151,2,1,Low,Saturation
Design 1,4,152,2,2,Low,Hue_Saturation
Design 1,4,153,2,2,Low,Hue_Saturation
Design 1,4,154,2,3,Low,Hue
Design 1,4,155,2,4,Low,Hue_Saturation
Design 1,4,156,2,5,Low,Saturation
Design 1,4,157,2,6,Low,Hue
Design 1,4,158,2,7,Low,Hue_Saturation
Design 1,4,159,2,8,Low,Hue
Design 1,4,160,2,9,Low,Hue_Saturation
Design 1,4,161,2,10,Low,Saturation
Design 1,4,162,2,10,Low,Saturation
Design 1,4,163,2,11,Low,Hue
Design 1,4,164,2,12,Low,Saturation
Design 1,4,165,2,13,Low,Hue
Design 1,4,166,3,1,High,Saturation
Design 1,4,167,3,2,High,Hue_Saturation
Design 1,4,168,3,2,High,Hue_Saturation
Design 1,4,169,3,3,High,Hue
Design 1,4,170,3,4,High,Hue_Saturation
Design 1,4,171,3,5,High,Saturation
Design 1,4,172,3,6,High,Hue
Design 1,4,173,3,7,High,Hue_Saturation
Design 1,4,174,3,8,High,Hue
Design 1,4,175,3,9,High,Hue_Saturation
Design 1,4,176,3,10,High,Saturation
Design 1,4,177,3,10,High,Saturation
Design 1,4,178,3,11,High,Hue
Design 1,4,179,3,12,High,Saturation
Design 1,4,180,3,13,High,Hue
Design 1,5,181,1,1,High,Saturation
Design 1,5,182,1,2,High,Hue_Saturation
Design 1,5,183,1,2,High,Hue_Saturation
Design 1,5,184,1,3,High,Hue
Design 1,5,185,1,4,High,Hue_Saturation
Design 1,5,186,1,5,High,Saturation
Design 1,5,187,1,6,High,Hue
Design 1,5,188,1,7,High,Hue_Saturation
Design 1,5,189,1,8,High,Hue
Design 1,5,190,1,9,High,Hue_Saturation
Design 1,5,191,1,10,High,Saturation
Design 1,5,192,1,10,High,Saturation
Design 1,5,193,1,11,High,Hue
Design 1,5,194,1,12,High,Saturation
Design 1,5,195,1,13,High,Hue
Design 1,5,196,2,1,Medium,Saturation
Design 1,5,197,2,2,Medium,Hue_Saturation
Design 1,5,198,2,2,Medium,Hue_Saturation
Design 1,5,199,2,3,Medium,Hue
Design 1,5,200,2,4,Medium,Hue_Saturation
Design 1,5,201,2,5,Medium,Saturation
Design 1,5,202,2,6,Medium,Hue
Design 1,5,203,2,7,Medium,Hue_Saturation
Design 1,5,204,2,8,Medium,Hue
Design 1,5,205,2,9,Medium,Hue_Saturation
Design 1,5,206,2,10,Medium,Saturation
Design 1,5,207,2,10,Medium,Saturation
Design 1,5,208,2,11,Medium,Hue
Design 1,5,209,2,12,Medium,Saturation
Design 1,5,210,2,13,Medium,Hue
Design 1,5,211,3,1,Low,Saturation
Design 1,5,212,3,2,Low,Hue_Saturation
Design 1,5,213,3,2,Low,Hue_Saturation
Design 1,5,214,3,3,Low,Hue
Design 1,5,215,3,4,Low,Hue_Saturation
Design 1,5,216,3,5,Low,Saturation
Design 1,5,217,3,6,Low,Hue
Design 1,5,218,3,7,Low,Hue_Saturation
Design 1,5,219,3,8,Low,Hue
Design 1,5,220,3,9,Low,Hue_Saturation
Design 1,5,221,3,10,Low,Saturation
Design 1,5,222,3,10,Low,Saturation
Design 1,5,223,3,11,Low,Hue
Design 1,5,224,3,12,Low,Saturation
Design 1,5,225,3,13,Low,Hue
Design 1,6,226,1,1,Low,Saturation
Design 1,6,227,1,2,Low,Hue_Saturation
Design 1,6,228,1,2,Low,Hue_Saturation
Design 1,6,229,1,3,Low,Hue
Design 1,6,230,1,4,Low,Hue_Saturation
Design 1,6,231,1,5,Low,Saturation
Design 1,6,232,1,6,Low,Hue
Design 1,6,233,1,7,Low,Hue_Saturation
Design 1,6,234,1,8,Low,Hue
Design 1,6,235,1,9,Low,Hue_Saturation
Design 1,6,236,1,10,Low,Saturation
Design 1,6,237,1,10,Low,Saturation
Design 1,6,238,1,11,Low,Hue
Design 1,6,239,1,12,Low,Saturation
Design 1,6,240,1,13,Low,Hue
Design 1,6,241,2,1,High,Saturation
Design 1,6,242,2,2,High,Hue_Saturation
Design 1,6,243,2,2,High,Hue_Saturation
Design 1,6,244,2,3,High,Hue
Design 1,6,245,2,4,High,Hue_Saturation
Design 1,6,246,2,5,High,Saturation
Design 1,6,247,2,6,High,Hue
Design 1,6,248,2,7,High,Hue_Saturation
Design 1,6,249,2,8,High,Hue
Design 1,6,250,2,9,High,Hue_Saturation
Design 1,6,251,2,10,High,Saturation
Design 1,6,252,2,10,High,Saturation
Design 1,6,253,2,11,High,Hue
Design 1,6,254,2,12,High,Saturation
Design 1,6,255,2,13,High,Hue
Design 1,6,256,3,1,Medium,Saturation
Design 1,6,257,3,2,Medium,Hue_Saturation
Design 1,6,258,3,2,Medium,Hue_Saturation
Design 1,6,259,3,3,Medium,Hue
Design 1,6,260,3,4,Medium,Hue_Saturation
Design 1,6,261,3,5,Medium,Saturation
Design 1,6,262,3,6,Medium,Hue
Design 1,6,263,3,7,Medium,Hue_Saturation
Design 1,6,264,3,8,Medium,Hue
Design 1,6,265,3,9,Medium,Hue_Saturation
Design 1,6,266,3,10,Medium,Saturation
Design 1,6,267,3,10,Medium,Saturation
Design 1,6,268,3,11,Medium,Hue
Design 1,6,269,3,12,Medium,Saturation
Design 1,6,270,3,13,Medium,Hue
Design 1,7,271,1,1,Medium,Saturation
Design 1,7,272,1,2,Medium,Hue_Saturation
Design 1,7,273,1,2,Medium,Hue_Saturation
Design 1,7,274,1,3,Medium,Hue
Design 1,7,275,1,4,Medium,Hue_Saturation
Design 1,7,276,1,5,Medium,Saturation
Design 1,7,277,1,6,Medium,Hue
Design 1,7,278,1,7,Medium,Hue_Saturation
Design 1,7,279,1,8,Medium,Hue
Design 1,7,280,1,9,Medium,Hue_Saturation
Design 1,7,281,1,10,Medium,Saturation
Design 1,7,282,1,10,Medium,Saturation
Design 1,7,283,1,11,Medium,Hue
Design 1,7,284,1,12,Medium,Saturation
Design 1,7,285,1,13,Medium,Hue
Design 1,7,286,2,1,Low,Saturation
Design 1,7,287,2,2,Low,Hue_Saturation
Design 1,7,288,2,2,Low,Hue_Saturation
Design 1,7,289,2,3,Low,Hue
Design 1,7,290,2,4,Low,Hue_Saturation
Design 1,7,291,2,5,Low,Saturation
Design 1,7,292,2,6,Low,Hue
Design 1,7,293,2,7,Low,Hue_Saturation
Design 1,7,294,2,8,Low,Hue
Design 1,7,295,2,9,Low,Hue_Saturation
Design 1,7,296,2,10,Low,Saturation
Design 1,7,297,2,10,Low,Saturation
Design 1,7,298,2,11,Low,Hue
Design 1,7,299,2,12,Low,Saturation
Design 1,7,300,2,13,Low,Hue
Design 1,7,301,3,1,High,Saturation
Design 1,7,302,3,2,High,Hue_Saturation
Design 1,7,303,3,2,High,Hue_Saturation
Design 1,7,304,3,3,High,Hue
Design 1,7,305,3,4,High,Hue_Saturation
Design 1,7,306,3,5,High,Saturation
Design 1,7,307,3,6,High,Hue
Design 1,7,308,3,7,High,Hue_Saturation
Design 1,7,309,3,8,High,Hue
Design 1,7,310,3,9,High,Hue_Saturation
Design 1,7,311,3,10,High,Saturation
Design 1,7,312,3,10,High,Saturation
Design 1,7,313,3,11,High,Hue
Design 1,7,314,3,12,High,Saturation
Design 1,7,315,3,13,High,Hue
Design 1,8,316,1,1,High,Saturation
Design 1,8,317,1,2,High,Hue_Saturation
Design 1,8,318,1,2,High,Hue_Saturation
Design 1,8,319,1,3,High,Hue
Design 1,8,320,1,4,High,Hue_Saturation
Design 1,8,321,1,5,High,Saturation
Design 1,8,322,1,6,High,Hue
Design 1,8,323,1,7,High,Hue_Saturation
Design 1,8,324,1,8,High,Hue
Design 1,8,325,1,9,High,Hue_Saturation
Design 1,8,326,1,10,High,Saturation
Design 1,8,327,1,10,High,Saturation
Design 1,8,328,1,11,High,Hue
Design 1,8,329,1,12,High,Saturation
Design 1,8,330,1,13,High,Hue
Design 1,8,331,2,1,Medium,Saturation
Design 1,8,332,2,2,Medium,Hue_Saturation
Design 1,8,333,2,2,Medium,Hue_Saturation
Design 1,8,334,2,3,Medium,Hue
Design 1,8,335,2,4,Medium,Hue_Saturation
Design 1,8,336,2,5,Medium,Saturation
Design 1,8,337,2,6,Medium,Hue
Design 1,8,338,2,7,Medium,Hue_Saturation
Design 1,8,339,2,8,Medium,Hue
Design 1,8,340,2,9,Medium,Hue_Saturation
Design 1,8,341,2,10,Medium,Saturation
Design 1,8,342,2,10,Medium,Saturation
Design 1,8,343,2,11,Medium,Hue
Design 1,8,344,2,12,Medium,Saturation
Design 1,8,345,2,13,Medium,Hue
Design 1,8,346,3,1,Low,Saturation
Design 1,8,347,3,2,Low,Hue_Saturation
Design 1,8,348,3,2,Low,Hue_Saturation
Design 1,8,349,3,3,Low,Hue
Design 1,8,350,3,4,Low,Hue_Saturation
Design 1,8,351,3,5,Low,Saturation
Design 1,8,352,3,6,Low,Hue
Design 1,8,353,3,7,Low,Hue_Saturation
Design 1,8,354,3,8,Low,Hue
Design 1,8,355,3,9,Low,Hue_Saturation
Design 1,8,356,3,10,Low,Saturation
Design 1,8,357,3,10,Low,Saturation
Design 1,8,358,3,11,Low,Hue
Design 1,8,359,3,12,Low,Saturation
Design 1,8,360,3,13,Low,Hue
Design 1,9,361,1,1,Low,Saturation
Design 1,9,362,1,2,Low,Hue_Saturation
Design 1,9,363,1,2,Low,Hue_Saturation
Design 1,9,364,1,3,Low,Hue
Design 1,9,365,1,4,Low,Hue_Saturation
Design 1,9,366,1,5,Low,Saturation
Design 1,9,367,1,6,Low,Hue
Design 1,9,368,1,7,Low,Hue_Saturation
Design 1,9,369,1,8,Low,Hue
Design 1,9,370,1,9,Low,Hue_Saturation
Design 1,9,371,1,10,Low,Saturation
Design 1,9,372,1,10,Low,Saturation
Design 1,9,373,1,11,Low,Hue
Design 1,9,374,1,12,Low,Saturation
Design 1,9,375,1,13,Low,Hue
Design 1,9,376,2,1,High,Saturation
Design 1,9,377,2,2,High,Hue_Saturation
Design 1,9,378,2,2,High,Hue_Saturation
Design 1,9,379,2,3,High,Hue
Design 1,9,380,2,4,High,Hue_Saturation
Design 1,9,381,2,5,High,Saturation
Design 1,9,382,2,6,High,Hue
Design 1,9,383,2,7,High,Hue_Saturation
Design 1,9,384,2,8,High,Hue
Design 1,9,385,2,9,High,Hue_Saturation
Design 1,9,386,2,10,High,Saturation
Design 1,9,387,2,10,High,Saturation
Design 1,9,388,2,11,High,Hue
Design 1,9,389,2,12,High,Saturation
Design 1,9,390,2,13,High,Hue
Design 1,9,391,3,1,Medium,Saturation
Design 1,9,392,3,2,Medium,Hue_Saturation
Design 1,9,393,3,2,Medium,Hue_Saturation
Design 1,9,394,3,3,Medium,Hue
Design 1,9,395,3,4,Medium,Hue_Saturation
Design 1,9,396,3,5,Medium,Saturation
Design 1,9,397,3,6,Medium,Hue
Design 1,9,398,3,7,Medium,Hue_Saturation
Design 1,9,399,3,8,Medium,Hue
Design 1,9,400,3,9,Medium,Hue_Saturation
Design 1,9,401,3,10,Medium,Saturation
Design 1,9,402,3,10,Medium,Saturation
Design 1,9,403,3,11,Medium,Hue
Design 1,9,404,3,12,Medium,Saturation
Design 1,9,405,3,13,Medium,Hue`;

export type CSVDataRow = Record<string, string>;
export type CSVData = CSVDataRow[];

export class TrialTable {
    readonly sourceCSVData: CSVData;
    participantTrials: Map<ParticipantID, Trial[]>;

    private constructor(csvData: CSVData) {
        this.sourceCSVData = csvData;
        this.participantTrials = new Map();
        this.init(csvData);
    }

    private init(csvData: CSVData): void {
        for (let row of csvData) {
            const trial = Trial.fromCSVRow(row);

            if (!this.participantTrials.has(trial.participantID)) {
                this.participantTrials.set(trial.participantID, []);
            }

            const trials = this.participantTrials.get(trial.participantID);
            trials.push(trial);
        }
    }

    static fromCSV(): TrialTable {
        const csv = Papa.parse(TRIAL_TABLE_CSV, { header: true });
        return new TrialTable(csv.data);
    }
}